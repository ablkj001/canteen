"use strict";(self["webpackChunkschool_canteen"]=self["webpackChunkschool_canteen"]||[]).push([[494],{7494:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("用户订单")])]),e("div",{staticClass:"search-box"},[e("div",{staticClass:"type"},[e("el-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[e("el-badge",{staticClass:"item",attrs:{value:t.NotCount}},[e("el-radio-button",{attrs:{label:"未完成订单"}})],1),e("el-badge",{staticClass:"item"},[e("el-radio-button",{staticStyle:{"margin-left":"20px"},attrs:{label:"已完成订单"}})],1)],1)],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{label:"订单编号",align:"center",prop:"orderid",width:"150"}}),e("el-table-column",{attrs:{label:"订单菜品",prop:"dis",align:"center",width:"600"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-popover",{attrs:{placement:"bottom",title:"订单详情",trigger:"click"}},[[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.dis}},[e("el-table-column",{attrs:{prop:"did",label:"菜品ID",width:"100",align:"center"}}),e("el-table-column",{attrs:{prop:"dname",label:"菜品名称",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"dprice",label:"菜品价格",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"count",label:"菜品数量",align:"center"}}),e("el-table-column",{attrs:{prop:"payment",label:"小计",align:"center"}})],1)],e("div",{staticClass:"name-wrapper",staticStyle:{cursor:"pointer"},attrs:{slot:"reference",title:"点击显示订单详情"},slot:"reference"},t._l(a.dis,(function(a){return e("span",{key:a.dis},[t._v(" "+t._s(a.dname)+" x"+t._s(a.count)+" ")])})),0)],2)]}}])}),e("el-table-column",{attrs:{label:"支付金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" "+t._s(e.count)+".00 ")]}}])}),e("el-table-column",{attrs:{label:"下单时间",prop:"date",align:"center",width:"170"}}),e("el-table-column",{attrs:{label:"订单状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[0==a.status?e("el-button",{attrs:{disabled:"",type:"success",size:"mini"}},[t._v(" 已完成 ")]):1==a.status?e("el-button",{attrs:{disabled:"",type:"primary",size:"mini"}},[t._v(" 出餐中 ")]):e("el-button",{attrs:{type:"info",size:"mini",disabled:""}},[t._v(" 未完成 ")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.search.pagenum,"page-size":t.search.pagesize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChangeFn,"update:currentPage":function(e){return t.$set(t.search,"pagenum",e)},"update:current-page":function(e){return t.$set(t.search,"pagenum",e)},"update:pageSize":function(e){return t.$set(t.search,"pagesize",e)},"update:page-size":function(e){return t.$set(t.search,"pagesize",e)}}})],1)],1)},n=[],s=a(586),i={name:"order",data(){return{radio1:"未完成订单",search:{pagenum:1,pagesize:7,isdone:0},NotCount:0,total:0,tableData:[]}},methods:{async initOrderListFn(){const{data:t}=await(0,s.sL)(this.search);if(0!=t.code)return this.$message.error("获取订单列表失败！");this.tableData=t.data,this.tableData.forEach((t=>{t.date=this.myDateFormat(t.date)})),this.total=t.count,0==this.search.isdone&&(this.NotCount=t.count)},handleCurrentChangeFn(t){this.search.pagenum=t,this.initOrderListFn()},async removeFn(t){const e=await this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((t=>t));if("cancel"===e)return;const{data:a}=await deleteArticleAPI(t);if(0!==a.code)return this.$message.error("删除失败!");this.$message.success("删除成功!"),this.resetListFn()}},mounted(){this.initOrderListFn()},watch:{radio1:{immediate:!0,handler(t){this.search.isdone="已完成订单"==t?1:0,this.pagenum=1,this.initOrderListFn()}}}},l=i,o=a(1001),c=(0,o.Z)(l,r,n,!1,null,"bddac2fe",null),u=c.exports}}]);
//# sourceMappingURL=494.1aba9ab6.js.map