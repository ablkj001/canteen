"use strict";(self["webpackChunkschool_canteen"]=self["webpackChunkschool_canteen"]||[]).push([[126],{6126:function(e,r,s){s.r(r),s.d(r,{default:function(){return m}});var t=function(){var e=this,r=e._self._c;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("基本资料")])]),r("el-form",{ref:"userFormRef",attrs:{model:e.userForm,rules:e.userFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"登录名称",prop:"username"}},[r("el-input",{attrs:{disabled:""},model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",r)},expression:"userForm.username"}})],1),r("el-form-item",{attrs:{label:"用户类型",prop:"usertyoe"}},[r("el-input",{attrs:{disabled:""},model:{value:e.userForm.usertype,callback:function(r){e.$set(e.userForm,"usertype",r)},expression:"userForm.usertype"}})],1),r("el-form-item",{attrs:{label:"联系方式",prop:"tel"}},[r("el-input",{model:{value:e.userForm.tel,callback:function(r){e.$set(e.userForm,"tel",r)},expression:"userForm.tel"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitFn}},[e._v("提交修改")]),r("el-button",{on:{click:e.reSet}},[e._v("重置")])],1)],1)],1)},u=[],a=s(586),o={name:"UserInfo",data(){return{userForm:{id:this.$store.state.userInfo.uid,username:this.$store.state.userInfo.uname,usertype:"c"==this.$store.state.userInfo.flag?"普通用户":"管理用户",tel:this.$store.state.userInfo.tel},userFormRules:{tel:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^[0-9]{11}$/,message:"请输入正确格式的联系方式！",trigger:"blur"}]}}},methods:{submitFn(){this.$refs.userFormRef.validate((async e=>{if(!e)return this.$message.error("数据填写有误，请请重新编辑！");{const{data:e}=await(0,a.cZ)({uid:this.userForm.id,tel:this.userForm.tel});if(0!==e.code)return this.$message.error("用户信息更新失败！");this.$message.success("用户信息更新成功！"),this.$store.dispatch("initUserInfo")}}))},reSet(){this.$refs.userFormRef.resetFields()}},mounted(){}},l=o,i=s(1001),n=(0,i.Z)(l,t,u,!1,null,"1c7e1f7a",null),m=n.exports}}]);
//# sourceMappingURL=126.f5e91116.js.map