"use strict";(self["webpackChunkschool_canteen_backstage"]=self["webpackChunkschool_canteen_backstage"]||[]).push([[900],{900:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"header"},[e._v("菜品推荐管理")]),t("div",{staticClass:"container"},[t("div",{staticClass:"searchBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search.keyword,expression:"search.keyword"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入查找内容"},domProps:{value:e.search.keyword},on:{input:function(t){t.target.composing||e.$set(e.search,"keyword",t.target.value)}}}),t("button",{staticClass:"searchBtn",attrs:{type:"button"},on:{click:e.searchFn}},[e._v("搜索")]),t("div",{staticClass:"addBtn"},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.Type,callback:function(t){e.Type=t},expression:"Type"}},[t("el-option",{attrs:{value:"店铺推荐"}}),t("el-option",{attrs:{value:"前台展示"}})],1)],1)]),t("div",{staticClass:"listBox"},[t("div",{staticClass:"list"},[[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"did",label:"菜品ID",width:"120",align:"center"}}),t("el-table-column",{attrs:{prop:"sid",label:"店铺ID",width:"120",align:"center"}}),t("el-table-column",{attrs:{label:"菜品图片",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:e}){return[t("img",{staticStyle:{width:"47px",height:"47px"},attrs:{src:e.dimage}})]}}])}),t("el-table-column",{attrs:{prop:"dname",label:"菜品名称",width:"170",align:"center"}}),t("el-table-column",{attrs:{width:"100",label:"菜品状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==a.status,expression:"row.status == 0"}],attrs:{size:"mini",type:"success",disabled:""}},[e._v("在售")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:1==a.status,expression:"row.status == 1"}],attrs:{size:"mini",type:"info",disabled:""}},[e._v("待售")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:1==a.dishelevel,expression:"row.dishelevel == 1"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.agreeFn(a.did)}}},[e._v("确认推荐")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.disAgreeFn(a.did)}}},[e._v("拒绝推荐")])]}}])})],1)]],2),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.search.pagenum,"page-size":e.search.pagesize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChangeFn,"update:currentPage":function(t){return e.$set(e.search,"pagenum",t)},"update:current-page":function(t){return e.$set(e.search,"pagenum",t)},"update:pageSize":function(t){return e.$set(e.search,"pagesize",t)},"update:page-size":function(t){return e.$set(e.search,"pagesize",t)}}})],1)])])])},i=[],r=a(586),n={name:"suggestion",data(){return{search:{pagenum:1,pagesize:4,keyword:""},Type:"店铺推荐",total:0,dialogFormVisible:!1,formLabelWidth:"120px",tableData:[]}},methods:{async agreeFn(e){const{data:t}=await(0,r.yZ)({id:e});if(0!=t.code)return this.$message.error(t.message);this.$message.success("推荐成功！"),this.afterSug()},async disAgreeFn(e){const{data:t}=await(0,r.i8)({id:e});if(0!=t.code)return this.$message.error("拒绝失败！");this.$message.success("拒绝成功！"),this.afterSug()},afterSug(){this.search.pagenum=1,"店铺推荐"==newV?this.getShopSugList():this.getSugList()},async getShopSugList(){const{data:e}=await(0,r.fV)({page:this.search.pagenum,dname:this.search.keyword});if(console.log(e),0!=e.code)return this.$message.error("获取菜品推荐列表失败！");this.tableData=e.data,this.total=e.count},async getSugList(){const{data:e}=await(0,r.H7)({page:this.search.pagenum,dname:this.search.keyword,pagesize:this.search.pagesize});if(0!=e.code&&2!=e.code)return this.$message.error("获取菜品推荐列表失败！");1==e.code?(this.tableData=[],this.total=0):(this.tableData=e.data,this.total=e.count)},handleCurrentChangeFn(e){return this.search.pagenum=e,"店铺推荐"==this.swiperType?this.getShopSugList():this.getSugList()},searchFn(){""==this.search.keyword&&this.$message("请输入搜索关键词！"),this.search.pagenum=1,this.getShopSugList()}},mounted(){this.getShopSugList()},watch:{Type:{immediate:!0,handler(e){this.search.pagenum=1,this.search.keyword="","店铺推荐"==e?this.getShopSugList():this.getSugList()}}}},o=n,c=a(1001),l=(0,c.Z)(o,s,i,!1,null,"e0046d02",null),u=l.exports}}]);
//# sourceMappingURL=900.5858d50c.js.map