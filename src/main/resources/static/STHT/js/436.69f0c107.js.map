{"version":3,"file":"js/436.69f0c107.js","mappings":"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","sources":["webpack://school_canteen_backstage/./src/views/shop/index.vue","webpack://school_canteen_backstage/src/views/shop/index.vue","webpack://school_canteen_backstage/./src/views/shop/index.vue?28e7","webpack://school_canteen_backstage/./src/views/shop/index.vue?f828"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"店铺管理\")])]),_c('div',{staticClass:\"search-box\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.search}},[_c('el-form-item',[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"maxlength\":\"100\",\"placeholder\":\"请输入内容\"},model:{value:(_vm.search.keyword),callback:function ($$v) {_vm.$set(_vm.search, \"keyword\", $$v)},expression:\"search.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.searchShopFn}},[_vm._v(\"搜索\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑店铺\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"shopForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.shopRules}},[_c('el-form-item',{attrs:{\"label\":\"店铺ID\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.form.sid),callback:function ($$v) {_vm.$set(_vm.form, \"sid\", $$v)},expression:\"form.sid\"}})],1),_c('el-form-item',{attrs:{\"label\":\"店铺名称\",\"prop\":\"sname\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.sname),callback:function ($$v) {_vm.$set(_vm.form, \"sname\", $$v)},expression:\"form.sname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"所属食堂\",\"label-width\":_vm.formLabelWidth}},[_c('el-select',{attrs:{\"placeholder\":\"请选择食堂\",\"size\":\"small\"},model:{value:(_vm.form.roomName),callback:function ($$v) {_vm.$set(_vm.form, \"roomName\", $$v)},expression:\"form.roomName\"}},_vm._l((_vm.roomList),function(room){return _c('el-option',{key:room.rid,attrs:{\"value\":room.rname}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"店铺位置\",\"prop\":\"location\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.location),callback:function ($$v) {_vm.$set(_vm.form, \"location\", $$v)},expression:\"form.location\"}})],1),_c('el-form-item',{attrs:{\"label\":\"管理员账号\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.form.manager),callback:function ($$v) {_vm.$set(_vm.form, \"manager\", $$v)},expression:\"form.manager\"}})],1),_c('el-form-item',{attrs:{\"label\":\"店铺电话\",\"prop\":\"tel\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.tel),callback:function ($$v) {_vm.$set(_vm.form, \"tel\", $$v)},expression:\"form.tel\"}})],1),_c('el-form-item',{attrs:{\"label\":\"店铺状态\",\"label-width\":_vm.formLabelWidth}},[(_vm.form.status == 0)?_c('el-button',{attrs:{\"type\":\"success\",\"title\":\"点击停业整顿\"},on:{\"click\":function($event){_vm.form.status = 1}}},[_vm._v(\"正在营业\")]):_c('el-button',{attrs:{\"type\":\"info\",\"title\":\"点击开始营业\"},on:{\"click\":function($event){_vm.form.status = 0}}},[_vm._v(\"停业整顿\")])],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.updateShopFn()}}},[_vm._v(\"确 定\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"店铺ID\",\"align\":\"center\",\"prop\":\"sid\"}}),_c('el-table-column',{attrs:{\"label\":\"店铺名称\",\"prop\":\"sname\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"所属食堂\",\"prop\":\"roomName\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"店铺位置\",\"prop\":\"location\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"店铺电话\",\"prop\":\"tel\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.updateShop(row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeFn(row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.search.pagenum,\"page-size\":_vm.search.pagesize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChangeFn,\"update:currentPage\":function($event){return _vm.$set(_vm.search, \"pagenum\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.search, \"pagenum\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.search, \"pagesize\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.search, \"pagesize\", $event)}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>店铺管理</span>\r\n      </div>\r\n      <!-- 搜索区域 -->\r\n      <div class=\"search-box\">\r\n        <el-form :inline=\"true\" :model=\"search\">\r\n          <el-form-item>\r\n            <el-input\r\n              maxlength=\"100\"\r\n              v-model=\"search.keyword\"\r\n              placeholder=\"请输入内容\"\r\n              style=\"width: 300px\"\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"searchShopFn\"\r\n              >搜索</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <!-- 表单dialog -->\r\n      <el-dialog title=\"编辑店铺\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form :model=\"form\" ref=\"shopForm\" :rules=\"shopRules\">\r\n          <el-form-item label=\"店铺ID\" :label-width=\"formLabelWidth\">\r\n            <el-input disabled v-model=\"form.sid\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"店铺名称\"\r\n            prop=\"sname\"\r\n            :label-width=\"formLabelWidth\"\r\n          >\r\n            <el-input v-model=\"form.sname\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属食堂\" :label-width=\"formLabelWidth\">\r\n            <el-select\r\n              v-model=\"form.roomName\"\r\n              placeholder=\"请选择食堂\"\r\n              size=\"small\"\r\n            >\r\n              <el-option\r\n                v-for=\"room in roomList\"\r\n                :value=\"room.rname\"\r\n                :key=\"room.rid\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"店铺位置\"\r\n            prop=\"location\"\r\n            :label-width=\"formLabelWidth\"\r\n          >\r\n            <el-input v-model=\"form.location\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"管理员账号\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              disabled\r\n              v-model=\"form.manager\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"店铺电话\"\r\n            prop=\"tel\"\r\n            :label-width=\"formLabelWidth\"\r\n          >\r\n            <el-input v-model=\"form.tel\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺状态\" :label-width=\"formLabelWidth\">\r\n            <el-button\r\n              type=\"success\"\r\n              v-if=\"form.status == 0\"\r\n              @click=\"form.status = 1\"\r\n              title=\"点击停业整顿\"\r\n              >正在营业</el-button\r\n            >\r\n            <el-button\r\n              v-else\r\n              type=\"info\"\r\n              @click=\"form.status = 0\"\r\n              title=\"点击开始营业\"\r\n              >停业整顿</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updateShopFn()\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <!-- 店铺表格区域 -->\r\n      <el-table :data=\"tableData\" style=\"width: 100%\" border stripe>\r\n        <el-table-column label=\"店铺ID\" align=\"center\" prop=\"sid\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"店铺名称\"\r\n          prop=\"sname\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column label=\"所属食堂\" prop=\"roomName\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column label=\"店铺位置\" prop=\"location\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column label=\"店铺电话\" prop=\"tel\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n          <template v-slot=\"{ row }\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"updateShop(row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"removeFn(row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChangeFn\"\r\n        :current-page.sync=\"search.pagenum\"\r\n        :page-size.sync=\"search.pagesize\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getShopListAPI,\r\n  getRoomNameListAPI,\r\n  updateShopAPI,\r\n  searchShopAPI,\r\n  updateUserStatusAPI,\r\n} from \"@/api/index\";\r\nexport default {\r\n  name: \"shopCMD\",\r\n  //   ==============================================以下是data==============================================\r\n  data() {\r\n    return {\r\n      // 搜索参数对象\r\n      search: {\r\n        pagenum: 1,\r\n        pagesize: 6,\r\n        keyword: \"\",\r\n      },\r\n      //   控制添加店铺的 Dialog 对话框显示与隐藏\r\n      dialogFormVisible: false,\r\n      // 用于控制表单label的宽\r\n      formLabelWidth: \"120px\",\r\n      // 用于收集表单的数据\r\n      form: {\r\n        sid: \"\",\r\n        sname: \"\",\r\n        rid: \"\",\r\n        location: \"\",\r\n        tel: \"\",\r\n        manager: \"\",\r\n        status: \"\",\r\n      },\r\n      // 返回的数据总数\r\n      total: 0,\r\n      // 店铺列表展示数据\r\n      tableData: [\r\n        {\r\n          sid: \"123\",\r\n          sname: \"覃晓宇家的烧鸭饭\",\r\n          rid: \"1\",\r\n          location: \"二食堂顶楼\",\r\n          manager: \"覃晓宇\",\r\n          tel: \"17723147435\",\r\n          status: \"0\",\r\n        },\r\n      ],\r\n      // 食堂列表\r\n      roomList: [\r\n        {\r\n          rid: 1,\r\n          rname: \"一食堂\",\r\n        },\r\n        {\r\n          rid: 2,\r\n          rname: \"二食堂\",\r\n        },\r\n        {\r\n          rid: 3,\r\n          rname: \"三食堂\",\r\n        },\r\n      ],\r\n      // 表单的规则对象\r\n      shopRules: {\r\n        tel: [\r\n          { required: true, message: \"请输入联系方式\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^[0-9]{11}$/,\r\n            message: \"请输入正确格式的联系方式！\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        sname: [\r\n          { required: true, message: \"请输入店铺名称\", trigger: \"blur\" },\r\n          {\r\n            min: 1,\r\n            max: 10,\r\n            message: \"店铺名的长度应在 1 到 10 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        location: [\r\n          { required: true, message: \"请输入店铺位置\", trigger: \"blur\" },\r\n          {\r\n            min: 5,\r\n            max: 30,\r\n            message: \"店铺位置信息的长度应在 5 到 30 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  //   ==============================================以下是method方法==============================================\r\n  methods: {\r\n    // Dialog关闭时调用的函数\r\n    async handleClose(done) {\r\n      // 询问用户是否确认关闭对话框\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将导致文章信息丢失, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n\r\n      // 取消了关闭-阻止住, 什么都不干\r\n      if (confirmResult === \"cancel\") return this.$message(\"已取消!\");\r\n      // 确认关闭\r\n      // 清空关键数据\r\n      this.cleanForm();\r\n      done();\r\n    },\r\n    // 点击编辑按钮\r\n    updateShop(shop) {\r\n      this.dialogFormVisible = true;\r\n      this.form = { ...shop };\r\n    },\r\n    async updateShopFn() {\r\n      this.$refs.shopForm.validate(async (valid) => {\r\n        if (valid) {\r\n          // 检验成功，准备发起请求\r\n          this.roomList.forEach((room) => {\r\n            if (room.rname == this.form.roomName) this.form.rid = room.rid;\r\n          });\r\n          const { data: res } = await updateShopAPI(this.form);\r\n          if (res.code != 0)\r\n            return this, this.$message.error(\"店铺信息修改失败！\");\r\n          this.$message.success(\"店铺信息修改成功！\");\r\n          this.initShopListFn();\r\n          this.dialogFormVisible = false;\r\n        } else {\r\n          return this.$message.error(\"表单数据有误，请重新编辑。\");\r\n        }\r\n      });\r\n    },\r\n    // 清空表单数据\r\n    cleanForm() {\r\n      // 清空关键数据\r\n      this.$refs.pubFormRef.resetFields();\r\n      // 因为这2个变量对应的标签不是表单绑定的, 所以需要单独控制\r\n      this.pubForm.content = \"\";\r\n      this.pubForm.state = \"\";\r\n      this.pubForm.cover_img = null;\r\n      this.$refs.imgRef.setAttribute(\"src\", defaultImg);\r\n    },\r\n    // 初始化店铺列表\r\n    async initShopListFn() {\r\n      const { data: res } = await getShopListAPI(this.search);\r\n      if (res.code != 0) return this.$message.error(\"获取店铺列表失败！\");\r\n      this.tableData = res.data;\r\n      this.tableData.forEach((shop) => {\r\n        this.roomList.forEach((room) => {\r\n          if (room.rid == shop.rid) shop.roomName = room.rname;\r\n        });\r\n      });\r\n      this.total = res.count;\r\n    },\r\n    // 获取食堂列表\r\n    async getRoomList() {\r\n      const { data: res } = await getRoomNameListAPI();\r\n      if (res.code !== 0) return this.$message.error(\"获取食堂列表失败！\");\r\n      this.roomList = res.data;\r\n      this.initShopListFn();\r\n    },\r\n    // 页码值发生了变化\r\n    handleCurrentChangeFn(newPage) {\r\n      // 为页码值赋值\r\n      this.search.pagenum = newPage;\r\n      if (this.search.keyword != \"\") {\r\n        this.searchShopAction();\r\n      }\r\n      // 重新发起请求\r\n      this.initShopListFn();\r\n    },\r\n    // 搜索店铺按钮\r\n    searchShopFn() {\r\n      if (this.search.keyworld == \"\") {\r\n        this.$message(\"请输入搜索内容！\");\r\n        return this.initShopListFn();\r\n      }\r\n      this.search.pagenum = 1;\r\n      this.searchShopAction();\r\n    },\r\n    // 搜索实际\r\n    async searchShopAction() {\r\n      const { data: res } = await searchShopAPI(this.search);\r\n      console.log(res);\r\n      if (res.code != 0) return this.$message.error(\"搜索失败！\");\r\n      this.tableData = res.data;\r\n      this.tableData.forEach((shop) => {\r\n        this.roomList.forEach((room) => {\r\n          if (room.rid == shop.rid) shop.roomName = room.rname;\r\n        });\r\n      });\r\n      this.total = res.count;\r\n    },\r\n    // 删除\r\n    async removeFn(shop) {\r\n      // 1. 询问用户是否要删除\r\n      const confirmResult = await this.$confirm(\r\n        \"该操作将遍历删除该店铺下的所有菜品，是否确认删除？\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n\r\n      // 2. 取消了删除\r\n      if (confirmResult === \"cancel\") return;\r\n\r\n      // 执行删除的操作\r\n      let level = 2;\r\n      const { data: res } = await updateShopAPI({ ...shop, status: level });\r\n      if (res.code != 0) return this, this.$message.error(\"删除店铺信息失败！\");\r\n      if (level == 2) {\r\n        let userID = res.info;\r\n        this.changeStatus(userID, 2, \"c\");\r\n      }\r\n      this.$message.success(\"删除店铺信息成功！\");\r\n      this.initShopListFn();\r\n    },\r\n    // 修改管理员状态\r\n    async changeStatus(uid, status, flag) {\r\n      const { data: res } = await updateUserStatusAPI({ uid, status });\r\n      if (res.code != 0) return this.$message.error(\"用户状态切换失败！\");\r\n    },\r\n  },\r\n\r\n  //   ==============================================以下是mounted方法==============================================\r\n  mounted() {\r\n    this.getRoomList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  .btn-pub {\r\n    margin-top: 5px;\r\n  }\r\n}\r\n::v-deep .ql-editor {\r\n  min-height: 300px;\r\n}\r\n// 设置图片封面的宽高\r\n.cover-img {\r\n  width: 400px;\r\n  height: 280px;\r\n  object-fit: cover;\r\n}\r\n// 分页器样式\r\n.el-pagination {\r\n  margin-top: 15px;\r\n  text-align: center;\r\n}\r\n// 美化文章详情的内容样式\r\n.title {\r\n  font-size: 24px;\r\n  text-align: center;\r\n  font-weight: normal;\r\n  color: #000;\r\n  margin: 0 0 10px 0;\r\n}\r\n\r\n.info {\r\n  font-size: 12px;\r\n  span {\r\n    margin-right: 20px;\r\n  }\r\n}\r\n\r\n// 修改 dialog 内部元素的样式，需要添加样式穿透\r\n::v-deep .detail-box {\r\n  text-align: center;\r\n  img {\r\n    width: 500px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=af033d9c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=af033d9c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af033d9c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","search","staticStyle","model","value","keyword","callback","$$v","$set","expression","on","searchShopFn","dialogFormVisible","$event","ref","form","shopRules","formLabelWidth","sid","sname","roomName","_l","roomList","room","key","rid","rname","location","manager","tel","status","updateShopFn","tableData","scopedSlots","_u","fn","row","updateShop","removeFn","pagenum","pagesize","total","handleCurrentChangeFn","staticRenderFns","name","data","required","message","trigger","pattern","min","max","methods","done","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","catch","err","$message","cleanForm","shop","$refs","shopForm","validate","valid","error","forEach","res","updateShopAPI","code","success","initShopListFn","pubFormRef","resetFields","pubForm","content","state","cover_img","imgRef","setAttribute","defaultImg","getShopListAPI","count","getRoomNameListAPI","newPage","searchShopAction","keyworld","searchShopAPI","console","log","level","userID","info","changeStatus","uid","flag","updateUserStatusAPI","mounted","getRoomList","component"],"sourceRoot":""}