"use strict";(self["webpackChunkschool_canteen_backstage"]=self["webpackChunkschool_canteen_backstage"]||[]).push([[783],{6783:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"header"},[e._v("轮播图管理")]),t("div",{staticClass:"container"},[t("div",{staticClass:"searchBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search.keyword,expression:"search.keyword"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入查找内容"},domProps:{value:e.search.keyword},on:{input:function(t){t.target.composing||e.$set(e.search,"keyword",t.target.value)}}}),t("button",{staticClass:"searchBtn",attrs:{type:"button"},on:{click:e.searchFn}},[e._v("搜索")]),t("div",{staticClass:"addBtn"},[t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.swiperType,callback:function(t){e.swiperType=t},expression:"swiperType"}},[t("el-option",{attrs:{value:"店铺推荐"}}),t("el-option",{attrs:{value:"前台展示"}})],1)],1)]),t("div",{staticClass:"listBox"},[t("div",{staticClass:"list"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.swiperList.length,expression:"swiperList.length == 0"}]},[t("el-empty",{attrs:{description:"没有数据"}})],1),e._l(e.swiperList,(function(s){return t("div",{key:s.did,staticClass:"swiperItem"},[t("div",{staticClass:"pic"},[t("img",{staticClass:"swiperPic",attrs:{src:s.swiper}})]),t("div",{staticClass:"info"},[t("ul",[t("li",[e._v("店铺ID:"+e._s(s.sid))]),t("li",[e._v("菜品ID:"+e._s(s.did))]),t("li",[e._v("菜品名称:"+e._s(s.dname))]),t("li",[e._v("菜品价格:"+e._s(s.dprice))])])]),t("div",{staticClass:"setting"},[t("div",{staticClass:"buttons"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:1==s.swiperlevel,expression:"swiper.swiperlevel == 1"}],attrs:{type:"primary",icon:"el-icon-edit",title:"通过推荐"},on:{click:function(t){return e.agreeFn(s.did)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"拒绝推荐"},on:{click:function(t){return e.disAgreeFn(s.did)}}})],1)])])}))],2),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.search.pagenum,"page-size":e.search.pagesize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChangeFn,"update:currentPage":function(t){return e.$set(e.search,"pagenum",t)},"update:current-page":function(t){return e.$set(e.search,"pagenum",t)},"update:pageSize":function(t){return e.$set(e.search,"pagesize",t)},"update:page-size":function(t){return e.$set(e.search,"pagesize",t)}}})],1)])])])},a=[],r=s(586),n={name:"swiperCMD",data(){return{search:{pagenum:1,pagesize:2,keyword:""},swiperType:"店铺推荐",total:0,swiperList:[],dialogFormVisible:!1,formLabelWidth:"120px"}},methods:{async agreeFn(e){const{data:t}=await(0,r.Q$)({id:e});if(0!=t.code)return this.$message.error(t.message);this.$message.success("推荐成功！"),this.afterSug()},async disAgreeFn(e){const{data:t}=await(0,r.fv)({id:e});if(0!=t.code)return this.$message.error("拒绝失败！");this.$message.success("拒绝成功！"),this.afterSug()},afterSug(){this.search.pagenum=1,"店铺推荐"==newV?this.getShopSwiperList():this.getSwiperList()},async getShopSwiperList(){const{data:e}=await(0,r.Cz)({page:this.search.pagenum,dname:this.search.keyword});if(console.log(e),0!=e.code)return this.$message.error("获取轮播图列表失败！");this.swiperList=e.data,this.total=e.count},async getSwiperList(){const{data:e}=await(0,r.Zc)({page:this.search.pagenum,dname:this.search.keyword,pagesize:this.search.pagesize});if(0!=e.code&&1!=e.code)return this.$message.error("获取轮播图列表失败！");1==e.code?(this.swiperList=[],this.total=0):(this.swiperList=e.data,this.total=e.count)},handleCurrentChangeFn(e){return this.search.pagenum=e,"店铺推荐"==this.swiperType?this.getShopSwiperList():this.getSwiperList()},searchFn(){""==this.search.keyword&&this.$message("请输入搜索关键词！"),this.search.pagenum=1,this.getShopSwiperList()}},mounted(){this.getShopSwiperList()},watch:{swiperType:{immediate:!0,handler(e){this.search.pagenum=1,this.search.keyword="","店铺推荐"==e?this.getShopSwiperList():this.getSwiperList()}}}},c=n,o=s(1001),p=(0,o.Z)(c,i,a,!1,null,"8f54e59a",null),h=p.exports}}]);
//# sourceMappingURL=783.a9abf083.js.map