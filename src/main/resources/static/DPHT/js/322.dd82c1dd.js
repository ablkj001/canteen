"use strict";(self["webpackChunkschool_canteen_shop_backstage"]=self["webpackChunkschool_canteen_shop_backstage"]||[]).push([[322],{4322:function(e,r,s){s.r(r),s.d(r,{default:function(){return p}});var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"reg-container"},[r("div",{staticClass:"reg-box"},[r("div",{staticClass:"title-box"},[e._v("店铺后台管理系统")]),r("el-form",{ref:"regForm",attrs:{model:e.form,rules:e.regRules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"repassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次确认密码"},model:{value:e.form.repassword,callback:function(r){e.$set(e.form,"repassword",r)},expression:"form.repassword"}})],1),r("el-form-item",{attrs:{prop:"shopname"}},[r("el-input",{attrs:{placeholder:"请输入店铺名称"},model:{value:e.form.shopname,callback:function(r){e.$set(e.form,"shopname",r)},expression:"form.shopname"}})],1),r("el-form-item",{attrs:{prop:"roomID"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择店铺所属食堂"},model:{value:e.form.roomID,callback:function(r){e.$set(e.form,"roomID",r)},expression:"form.roomID"}},e._l(e.roomList,(function(e){return r("el-option",{key:e.rid,attrs:{label:e.rname,value:e.rid}})})),1)],1),r("el-form-item",{attrs:{prop:"position"}},[r("el-input",{attrs:{placeholder:"请输入店铺位置"},model:{value:e.form.position,callback:function(r){e.$set(e.form,"position",r)},expression:"form.position"}})],1),r("el-form-item",{attrs:{prop:"tel"}},[r("el-input",{attrs:{placeholder:"请输入店铺负责人联系电话"},model:{value:e.form.tel,callback:function(r){e.$set(e.form,"tel",r)},expression:"form.tel"}})],1),r("el-form-item",[r("el-button",{staticClass:"btn-reg",attrs:{type:"primary"},on:{click:e.registerFn}},[e._v("注册")]),r("el-link",{attrs:{type:"info"},on:{click:e.goLogin}},[e._v("去登陆")])],1)],1)],1)])},o=[],a=(s(7658),s(586)),i={name:"my-register",data(){return{form:{username:"",password:"",repassword:"",usertype:"b",shopname:"",roomID:"",position:"",tel:""},roomList:[],regRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,10}$/,message:"用户名只能是1-10的大小写字母和数字的组合",trigger:"blur"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^[0-9]{11}$/,message:"请输入正确格式的联系方式！",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码只能是6-15位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:this.samePwnFn,trigger:"blur"}],shopname:[{required:!0,message:"请输入店铺名称",trigger:"blur"},{min:1,max:10,message:"店铺名的长度应在 3 到 5 个字符",trigger:"blur"}],roomID:[{required:!0,message:"请选择所属食堂",trigger:"change"}],position:[{required:!0,message:"请输入店铺位置",trigger:"blur"},{min:5,max:30,message:"店铺位置信息的长度应在 5 到 30 个字符",trigger:"blur"}]}}},methods:{registerFn(){this.$refs.regForm.validate((async e=>{if(!e)return this.$message.error("表单数据有误，请重新编辑。");{let e={username:this.form.username,password:this.form.password,tel:this.form.tel,usertype:"b",sname:this.form.shopname,rid:this.form.roomID,location:this.form.position};const{data:r}=await(0,a.QV)(e);if(0!==r.code)return this.$message.error(r.message);this.$message.success(r.message),this.$router.push("/login")}}))},goLogin(){this.$router.push("/login")},samePwnFn(e,r,s){r!==this.form.password?s(new Error("两次输入的密码不一致！请重新编辑。")):s()},async getRoomList(){const{data:e}=await(0,a.Du)();if(0!==e.code)return this.$message.error("获取食堂列表失败！");this.roomList=e.data}},mounted(){this.getRoomList()}},l=i,m=s(1001),n=(0,m.Z)(l,t,o,!1,null,"3a141b11",null),p=n.exports}}]);
//# sourceMappingURL=322.dd82c1dd.js.map