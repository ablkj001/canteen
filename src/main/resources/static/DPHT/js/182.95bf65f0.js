"use strict";(self["webpackChunkschool_canteen_shop_backstage"]=self["webpackChunkschool_canteen_shop_backstage"]||[]).push([[182],{2182:function(t,a,s){s.r(a),s.d(a,{default:function(){return h}});var e=function(){var t=this,a=t._self._c;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("更换头像")])]),a("div",[this.avatar?a("img",{staticClass:"the_img",attrs:{src:this.avatar,alt:""}}):a("img",{staticClass:"the_img",attrs:{src:s(634),alt:""}}),a("div",{staticClass:"btn-box"},[a("input",{ref:"iptRef",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.chooseImg}},[t._v("选择图片")]),a("el-button",{attrs:{type:"success",icon:"el-icon-upload",disabled:""===t.avatar},on:{click:t.uploadFn}},[t._v("上传头像")])],1)])])},i=[],r=s(586),c={name:"UserAvatar",data(){return{avatar:this.$store.state.userInfo.uavatar}},methods:{chooseImg(){this.$refs.iptRef.click()},onFileChange(t){const a=t.target.files;if(0===a.length)this.avatar="";else{const t=new FileReader;t.readAsDataURL(a[0]),t.onload=async t=>{this.avatar=await t.target.result},this.avatar=URL.createObjectURL(a[0])}},async uploadFn(){const{data:t}=await(0,r.E5)({uid:this.$store.state.userInfo.uid,uavatar:this.avatar});if(0!==t.code)return this.$message.error("上传头像失败！");this.$message.success("上传头像成功！"),this.$store.dispatch("initUserInfo")}}},n=c,o=s(1001),l=(0,o.Z)(n,e,i,!1,null,"e591be5c",null),h=l.exports},634:function(t,a,s){t.exports=s.p+"img/defaultLOGO.2c22235d.jpg"}}]);
//# sourceMappingURL=182.95bf65f0.js.map