"use strict";(self["webpackChunkschool_canteen_shop_backstage"]=self["webpackChunkschool_canteen_shop_backstage"]||[]).push([[126],{6126:function(e,s,r){r.r(s),r.d(s,{default:function(){return m}});var t=function(){var e=this,s=e._self._c;return s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("基本资料")])]),s("el-form",{ref:"userFormRef",attrs:{model:e.userForm,rules:e.userFormRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"登录名称",prop:"username"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.username,callback:function(s){e.$set(e.userForm,"username",s)},expression:"userForm.username"}})],1),s("el-form-item",{attrs:{label:"用户类型",prop:"usertyoe"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.usertype,callback:function(s){e.$set(e.userForm,"usertype",s)},expression:"userForm.usertype"}})],1),s("el-form-item",{attrs:{label:"联系方式",prop:"tel"}},[s("el-input",{model:{value:e.userForm.tel,callback:function(s){e.$set(e.userForm,"tel",s)},expression:"userForm.tel"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitFn}},[e._v("提交修改")]),s("el-button",{on:{click:e.reSet}},[e._v("重置")])],1)],1)],1)},a=[],o=r(586),u={name:"UserInfo",data(){return{userForm:{id:this.$store.state.userInfo.uid,username:this.$store.state.userInfo.uname,usertype:"c"==this.$store.state.userInfo.flag?"普通用户":"管理用户",tel:this.$store.state.userInfo.tel},userFormRules:{tel:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^[0-9]{11}$/,message:"请输入正确格式的联系方式！",trigger:"blur"}]}}},methods:{submitFn(){this.$refs.userFormRef.validate((async e=>{if(!e)return this.$message.error("数据填写有误，请请重新编辑！");{const{data:e}=await(0,o.cZ)({uid:this.userForm.id,tel:this.userForm.tel});if(0!==e.code)return this.$message.error("用户信息更新失败！");this.$message.success("用户信息更新成功！"),this.$store.dispatch("initUserInfo")}}))},reSet(){this.$refs.userFormRef.resetFields()}},mounted(){}},l=u,i=r(1001),n=(0,i.Z)(l,t,a,!1,null,"1c7e1f7a",null),m=n.exports}}]);
//# sourceMappingURL=126.654d74ca.js.map