"use strict";(self["webpackChunkschool_canteen_shop_backstage"]=self["webpackChunkschool_canteen_shop_backstage"]||[]).push([[35],{9035:function(t,e,o){o.r(e),o.d(e,{default:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("商家订单管理")])]),e("div",{staticClass:"search-box"},[e("div",{staticClass:"type"},[e("el-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[e("el-badge",{staticClass:"item",attrs:{value:t.NotCount}},[e("el-radio-button",{attrs:{label:"未完成订单"}})],1),e("el-badge",{staticClass:"item"},[e("el-radio-button",{staticStyle:{"margin-left":"20px"},attrs:{label:"已完成订单"}})],1)],1)],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{label:"订单编号",align:"center",prop:"orderid",width:"150"}}),e("el-table-column",{attrs:{label:"订单菜品",prop:"dis",align:"center",width:"600"},scopedSlots:t._u([{key:"default",fn:function({row:o}){return[e("el-popover",{attrs:{placement:"bottom",title:"订单详情",trigger:"click"}},[[e("el-table",{staticStyle:{width:"100%"},attrs:{data:o.dis}},[e("el-table-column",{attrs:{prop:"did",label:"菜品ID",width:"100",align:"center"}}),e("el-table-column",{attrs:{prop:"dname",label:"菜品名称",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"dprice",label:"菜品价格",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"count",label:"菜品数量",align:"center"}}),e("el-table-column",{attrs:{prop:"payment",label:"小计",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:o}){return[0==o.status?e("el-button",{attrs:{type:"success",disabled:"",size:"mini"}},[t._v(" 完成 ")]):e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.foodOutFn(o)}}},[t._v(" 出餐 ")])]}}],null,!0)})],1)],e("div",{staticClass:"name-wrapper",staticStyle:{cursor:"pointer"},attrs:{slot:"reference",title:"点击显示订单详情"},on:{click:function(e){t.orderID=o.orderid}},slot:"reference"},t._l(o.dis,(function(o){return e("span",{key:o.dis},[t._v(" "+t._s(o.dname)+" x"+t._s(o.count)+" ")])})),0)],2)]}}])}),e("el-table-column",{attrs:{label:"支付金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" "+t._s(e.count)+".00 ")]}}])}),e("el-table-column",{attrs:{label:"下单时间",prop:"date",align:"center",width:"170"}}),e("el-table-column",{attrs:{label:"订单状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:o}){return[0==o.status?e("el-button",{attrs:{disabled:"",type:"success",size:"mini"}},[t._v(" 已完成 ")]):1==o.status?e("el-button",{attrs:{disabled:"",type:"primary",size:"mini"}},[t._v(" 出餐中 ")]):e("el-button",{attrs:{type:"info",size:"mini",disabled:""}},[t._v(" 未完成 ")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.search.pagenum,"page-size":t.search.pagesize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChangeFn,"update:currentPage":function(e){return t.$set(t.search,"pagenum",e)},"update:current-page":function(e){return t.$set(t.search,"pagenum",e)},"update:pageSize":function(e){return t.$set(t.search,"pagesize",e)},"update:page-size":function(e){return t.$set(t.search,"pagesize",e)}}})],1)],1)},r=[],s=o(586),i={name:"shop_order_CMD",data(){return{orderID:"",radio1:"未完成订单",search:{pagenum:1,pagesize:7,isdone:0},NotCount:0,total:0,tableData:[],finishList:[{orderID:"2023090001",userName:"刘坚",foodList:[{foodID:1,foodName:"小炒肉",foodPrice:12,foodNum:1},{foodID:2,foodName:"中炒肉",foodPrice:22,foodNum:1},{foodID:3,foodName:"大炒肉",foodPrice:32,foodNum:1}],totalPay:66,orderTime:"2023-04-09 12:00",state:"已完成"},{orderID:"2023090001",userName:"刘坚",foodList:[{foodID:1,foodName:"小炒肉",foodPrice:12,foodNum:1},{foodID:2,foodName:"中炒肉",foodPrice:22,foodNum:1},{foodID:3,foodName:"大炒肉",foodPrice:32,foodNum:1}],totalPay:66,orderTime:"2023-04-09 12:00",state:"已完成"},{orderID:"2023090001",userName:"刘坚",foodList:[{foodID:1,foodName:"小炒肉",foodPrice:12,foodNum:1},{foodID:2,foodName:"中炒肉",foodPrice:22,foodNum:1},{foodID:3,foodName:"大炒肉",foodPrice:32,foodNum:1}],totalPay:66,orderTime:"2023-04-09 12:00",state:"已完成"},{orderID:"2023090001",userName:"刘坚",foodList:[{foodID:1,foodName:"小炒肉",foodPrice:12,foodNum:1},{foodID:2,foodName:"中炒肉",foodPrice:22,foodNum:1},{foodID:3,foodName:"大炒肉",foodPrice:32,foodNum:1}],totalPay:66,orderTime:"2023-04-09 12:00",state:"已完成"}]}},methods:{btnChange(){console.log("OOKK"),"已完成订单"==this.radio1?(this.tableData=this.finishList,this.total=this.finishList.length):(this.tableData=this.notFinishList,this.total=this.notFinishList.length)},async foodOutFn(t){console.log(this.orderID),console.log(t);const{data:e}=await(0,s.C0)({orderid:this.orderID,did:t.did});if(0!=e.code)return this.$message.error("出餐失败！");this.$message.success("出餐成功！"),this.initOrderListFn()},async initOrderListFn(){const{data:t}=await(0,s.nh)(this.search);if(0!=t.code)return this.$message.error("获取订单列表失败！");console.log(t),this.tableData=t.data,this.total=t.count,0==this.search.isdone&&(this.NotCount=t.count)},handleCurrentChangeFn(t){this.search.pagenum=t,this.initOrderListFn()}},mounted(){this.initOrderListFn()},watch:{radio1:{immediate:!0,handler(t){this.search.isdone="已完成订单"==t?1:0,this.initOrderListFn()}}}},n=i,l=o(1001),d=(0,l.Z)(n,a,r,!1,null,"73aae206",null),c=d.exports}}]);
//# sourceMappingURL=35.be6a1ff6.js.map