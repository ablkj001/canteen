"use strict";(self["webpackChunkschool_canteen_shop_backstage"]=self["webpackChunkschool_canteen_shop_backstage"]||[]).push([[293],{1293:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"big"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("菜品上下架")])]),t("div",{staticClass:"search-box"},[t("el-form",{attrs:{inline:!0,model:e.search}},[t("el-form-item",[t("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"100",placeholder:"请输入内容"},model:{value:e.search.keyWord,callback:function(t){e.$set(e.search,"keyWord",t)},expression:"search.keyWord"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchFood}},[e._v("搜索")])],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.foodTypeChange},model:{value:e.search.foodType,callback:function(t){e.$set(e.search,"foodType",t)},expression:"search.foodType"}},[t("el-option",{attrs:{value:"全部"}}),t("el-option",{attrs:{value:"在售"}}),t("el-option",{attrs:{value:"待售"}})],1)],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.foodList,border:"",stripe:""}},[t("el-table-column",{attrs:{label:"菜品编号",prop:"did",align:"center"}}),t("el-table-column",{attrs:{label:"菜品名称",prop:"dname",align:"center"}}),t("el-table-column",{attrs:{label:"菜品价格",prop:"dprice",align:"center"}}),t("el-table-column",{attrs:{label:"菜品状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[0==a.status?t("el-button",{attrs:{disabled:"",type:"success",size:"mini"}},[e._v(" 在售 ")]):t("el-button",{attrs:{type:"info",size:"mini",disabled:""}},[e._v(" 待售 ")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[1==a.status?t("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-top",title:"上架"},on:{click:function(t){return e.changeStatus(a.did,0)}}}):t("el-button",{attrs:{type:"info",icon:"el-icon-bottom",title:"下架",size:"mini"},on:{click:function(t){return e.changeStatus(a.did,1)}}})]}}])})],1),t("el-pagination",{attrs:{"current-page":e.search.pagenum,"page-size":e.search.pagesize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChangeFn,"update:currentPage":function(t){return e.$set(e.search,"pagenum",t)},"update:current-page":function(t){return e.$set(e.search,"pagenum",t)},"update:pageSize":function(t){return e.$set(e.search,"pagesize",t)},"update:page-size":function(t){return e.$set(e.search,"pagesize",t)}}})],1)],1)},n=[],r=a(6410),o=a(586),i={name:"serve_or_not",data(){return{search:{pagenum:1,pagesize:7,foodType:"全部",keyWord:""},foodList:[],list:[],total:0}},methods:{handleCurrentChangeFn(e){if(this.search.pagenum=e,""!=this.search.keyWord)return this.searchFoodFn;this.initFoodListFn()},foodTypeChange(){if(this.search.pagenum=1,""!=this.search.keyWord)return this.searchFoodFn;this.initFoodListFn()},async initFoodListFn(){const{data:e}=await(0,o.Ps)(this.search);if(0!==e.code)return this.$error("获取菜品列表是失败！");this.total=e.count,this.list=e.data,this.foodList=this.list},searchFood(){if(""==this.search.keyWord)return this.$message("请输入搜索内容！");this.search.pagenum=1,this.searchFoodFn()},async searchFoodFn(){const{data:e}=await(0,o.qe)(this.search);if(0!=e.code)return this.$message.error("搜索失败！");this.total=e.count,this.tableData=e.data},async changeStatus(e,t){let a=0==t?"上架":"下架";if("上架"==a&&1==r.Z.state.shopInfo.status)return this.$message.error("店铺停业整顿中！暂不支持菜品上架！");const{data:s}=await(0,o.yn)({did:e,status:t});if(0!==s.code)return this.$message.error("菜品"+a+"失败！");this.$message.success("菜品"+a+"成功！"),this.initFoodListFn()}},mounted(){this.initFoodListFn()}},c=i,l=a(1001),u=(0,l.Z)(c,s,n,!1,null,"1f2f1548",null),h=u.exports}}]);
//# sourceMappingURL=293.80f4d9a4.js.map